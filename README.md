# Mini Advertise Fullstack

è¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å…¨æ ˆå¹¿å‘Šå¢™åº”ç”¨ï¼Œä½¿ç”¨ç°ä»£åŒ–çš„å‰ç«¯å’Œåç«¯æŠ€æœ¯æ ˆæ„å»ºã€‚å®ƒæ¨¡æ‹Ÿäº†ä¸€ä¸ªç®€å•çš„å¹¿å‘Šç«ä»·æ’åç³»ç»Ÿï¼Œæ ¹æ®å¹¿å‘Šçš„å‡ºä»·å’Œç‚¹å‡»åŠ¨æ€è®¡ç®—â€œçƒ­åº¦â€å¹¶è¿›è¡Œæ’åºã€‚

 <!-- è¯·å°†æ­¤é“¾æ¥æ›¿æ¢ä¸ºä½ çš„åº”ç”¨æˆªå›¾ -->

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **åŠ¨æ€å¹¿å‘Šå¢™**: ä»¥å“åº”å¼ç½‘æ ¼å¸ƒå±€å±•ç¤ºå¹¿å‘Šå¡ç‰‡ã€‚
- **çƒ­åº¦æ’åº**: å®æ—¶æ ¹æ® `å‡ºä»·` å’Œ `ç‚¹å‡»æ•°` è®¡ç®—çƒ­åº¦åˆ†æ•°ï¼Œå¹¶å¯¹å¹¿å‘Šè¿›è¡Œé™åºæ’åºã€‚
- **å®Œæ•´çš„ CRUD æ“ä½œ**: é€šè¿‡ç®€æ´çš„å¼¹çª—ç•Œé¢å®ç°å¹¿å‘Šçš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ã€‚
- **åŠ¨æ€è¡¨å•**: æ–°å¢/ç¼–è¾‘è¡¨å•çš„å­—æ®µå’ŒéªŒè¯è§„åˆ™ç”±åç«¯ API åŠ¨æ€é…ç½®ã€‚
- **ç‚¹å‡»æ¨¡æ‹Ÿ**: ç‚¹å‡»å¹¿å‘Šå¡ç‰‡ä¼šå¢åŠ å…¶ç‚¹å‡»è®¡æ•°å¹¶æ¨¡æ‹Ÿè·³è½¬ï¼Œçƒ­åº¦éšä¹‹æ›´æ–°ã€‚

## ğŸ› ï¸ æŠ€æœ¯é€‰å‹

- **å‰ç«¯**:
  - **React 19**: ä½¿ç”¨æœ€æ–°çš„ React ç‰ˆæœ¬ï¼Œå……åˆ†åˆ©ç”¨å…¶ Hooks å’Œå¹¶å‘ç‰¹æ€§ã€‚
  - **Vite**: æä¾›æé€Ÿçš„å¼€å‘ä½“éªŒå’Œä¼˜åŒ–çš„æ„å»ºè¾“å‡ºã€‚
  - **TypeScript**: ä¿è¯ä»£ç çš„ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤æ€§ã€‚

- **åç«¯**:
  - **Koa.js**: ä¸€ä¸ªè½»é‡ã€å¯Œæœ‰è¡¨ç°åŠ›çš„ Node.js Web æ¡†æ¶ã€‚
  - **@koa/router**: ç”¨äºå¤„ç† RESTful API è·¯ç”±ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- [Node.js](https://nodejs.org/) (å»ºè®®ç‰ˆæœ¬ >= 18.0.0)
- [Git](https://git-scm.com/)

### æœ¬åœ°å¼€å‘

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone https://github.com/liuyi-arch/mini-advertise-fullstack.git
   cd mini-advertise-fullstack
   ```

2. **å¯åŠ¨åç«¯æœåŠ¡**
   åœ¨**æ–°çš„ç»ˆç«¯**ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
   ```bash
   # è¿›å…¥åç«¯ç›®å½•
   cd server

   # å®‰è£…ä¾èµ–
   npm install

   # å¯åŠ¨æœåŠ¡ (è¿è¡Œåœ¨ http://localhost:3001)
   npm start
   ```

3. **å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡**
   åœ¨**å¦ä¸€ä¸ªæ–°çš„ç»ˆç«¯**ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
   ```bash
   # è¿›å…¥å‰ç«¯ç›®å½•
   cd client

   # å®‰è£…ä¾èµ–
   npm install

   # å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨ (è¿è¡Œåœ¨ http://localhost:5173)
   npm run dev
   ```

4. **è®¿é—®åº”ç”¨**
   æ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—® `http://localhost:5173`ã€‚

## â˜ï¸ éƒ¨ç½²æŒ‡å—

æ¨èé‡‡ç”¨ **Nginx + PM2** çš„æ–¹å¼è¿›è¡Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚

1. **æ„å»ºå‰ç«¯åº”ç”¨**
   ```bash
   cd client
   npm run build
   ```
   æ„å»ºäº§ç‰©å°†ç”Ÿæˆåœ¨ `client/dist` ç›®å½•ä¸‹ã€‚

2. **éƒ¨ç½²åç«¯æœåŠ¡**
   åœ¨ä½ çš„äº‘æœåŠ¡å™¨ä¸Šï¼Œä½¿ç”¨ PM2 æ¥å¯åŠ¨å’Œå®ˆæŠ¤åç«¯æœåŠ¡ã€‚
   ```bash
   # å…¨å±€å®‰è£… PM2
   npm install pm2 -g

   # åœ¨é¡¹ç›®æ ¹ç›®å½•å¯åŠ¨æœåŠ¡
   pm2 start server/src/index.js --name "mini-ad-api"
   ```

3. **é…ç½® Nginx**
   é…ç½® Nginx ä½œä¸ºåå‘ä»£ç†ï¼Œç›‘å¬ `80` ç«¯å£ï¼Œå¹¶å°†é™æ€æ–‡ä»¶è¯·æ±‚å’Œ API è¯·æ±‚åˆ†å‘åˆ°æ­£ç¡®çš„ä½ç½®ã€‚

   ```nginx
   server {
       listen 80;
       server_name your-domain.com; # æ›¿æ¢ä¸ºä½ çš„åŸŸåæˆ– IP

       # å‰ç«¯é™æ€æ–‡ä»¶
       location / {
           root /path/to/your/project/client/dist; # æ›¿æ¢ä¸ºå‰ç«¯æ„å»ºäº§ç‰©çš„ç»å¯¹è·¯å¾„
           try_files $uri /index.html;
       }

       # åç«¯ API ä»£ç†
       location /api {
           proxy_pass http://localhost:3001; # ä»£ç†åˆ°åç«¯ Koa æœåŠ¡
           proxy_set_header Host $host;
           # ... å…¶ä»–ä»£ç†é…ç½®
       }
   }
   ```

## ğŸ“ API æ¥å£

| æ–¹æ³•   | è·¯å¾„                  | æè¿°                 |
| :----- | :-------------------- | :------------------- |
| `GET`  | `/api/ads`            | è·å–æ‰€æœ‰å¹¿å‘Šåˆ—è¡¨     |
| `GET`  | `/api/ads/:id`        | è·å–å•ä¸ªå¹¿å‘Šè¯¦æƒ…     |
| `POST` | `/api/ads`            | åˆ›å»ºä¸€ä¸ªæ–°å¹¿å‘Š       |
| `PUT`  | `/api/ads/:id`        | æ›´æ–°ä¸€ä¸ªå¹¿å‘Š         |
| `DELETE`| `/api/ads/:id`        | åˆ é™¤ä¸€ä¸ªå¹¿å‘Š         |
| `POST` | `/api/ads/:id/click`  | å¢åŠ å¹¿å‘Šç‚¹å‡»æ•°       |
| `GET`  | `/api/form-config`    | è·å–åŠ¨æ€è¡¨å•é…ç½®     |

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Pull Requests æˆ– Issues æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚
